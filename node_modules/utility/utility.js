var path=require("path");
var pathary=__dirname.split(path.sep),
	basePath=pathary.slice(0,pathary.length-2).join(path.sep);

module.exports.getHashFileURL=function(d){
	if(!/^20\d{6}$/.test(d)){
		return null;
	}
	return "http://torrage.com/sync/"+d+".txt";
}


module.exports.getHashFilePath=function(d){
	if(!/^20\d{6}$/.test(d)){
		return null;
	}
	return basePath + "/torrage/files/"+ d + ".txt";
}


String.prototype.format=function () {
    var args = arguments;
    return this.replace(/\{\{|\{(\d+)\}/g, function (m, i, o, n) {
        if (m == "{{") return "{";
        return args[i];
    });
} 


module.exports.random=function(min,max){
	var range=max-min;
	var rnd=Math.random();
	return min+Math.round(range*rnd);
}

module.exports.getDownTorrUrls=function(hashKey){
	var ary=[];
	if(hashKey.length==40){
		ary.push("http://zoink.it/torrent/{0}.torrent".format(hashKey));
		ary.push("http://bt.box.n0808.com/{0}/{1}/{2}.torrent".format(hashKey.substr(0,2),hashKey.substr(hashKey.length-2,2), hashKey));
		ary.push("http://torcache.net/torrent/{0}.torrent".format(hashKey));
	}
	return ary;

}